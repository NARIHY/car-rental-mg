```md
# ğŸš˜ Car Rental MG API ğŸ‡²ğŸ‡¬

Une API RESTful pour gÃ©rer la **location de voitures Ã  Madagascar**, dÃ©veloppÃ©e en **Symfony** avec **API Platform**. Ce backend permet la gestion complÃ¨te de voitures, agences, clients, rÃ©servations, et paiements, avec authentification sÃ©curisÃ©e via JWT.

---

## ğŸ“Œ Objectif

CrÃ©er une plateforme de location de voitures modulable, pensÃ©e pour le marchÃ© malgache, permettant aux agences de proposer leurs vÃ©hicules, et aux clients de rÃ©server facilement.

---

## ğŸ§± Stack technique

- **Symfony 6.x**
- **API Platform**
- **Doctrine ORM**
- **JWT Auth (LexikJWTAuthenticationBundle)**
- **MySQL / PostgreSQL**
- **PHPUnit pour les tests**
- **CORS activÃ© (pour intÃ©gration avec frontends React/Angular)**

---

## ğŸ§© EntitÃ©s principales

### ğŸš— `Car`
ReprÃ©sente une voiture disponible Ã  la location.

| Champ | Type | Description |
|-------|------|-------------|
| id | UUID | Identifiant unique |
| brand | string | Marque (Toyota, Renault, etc.) |
| model | string | ModÃ¨le |
| licensePlate | string | NumÃ©ro d'immatriculation |
| fuelType | string | Essence / Diesel / Ã‰lectrique |
| transmission | string | Manuelle / Automatique |
| dailyRate | float | Prix par jour en **Ariary (Ar)** |
| isAvailable | bool | Disponible Ã  la location |
| agency | relation | Agence propriÃ©taire |
| images | array | URLs des photos |

---

### ğŸ¢ `Agency`
Agence ou propriÃ©taire de vÃ©hicules.

| Champ | Type | Description |
|-------|------|-------------|
| id | UUID | Identifiant |
| name | string | Nom de lâ€™agence |
| location | string | Ville, quartier (ex: Antananarivo, Mahajanga) |
| contact | string | TÃ©lÃ©phone, email |
| user | relation | Utilisateur liÃ© (pour le login admin agence) |

---

### ğŸ‘¤ `Customer`
Client effectuant une rÃ©servation.

| Champ | Type | Description |
|-------|------|-------------|
| id | UUID | Identifiant |
| fullName | string | Nom complet |
| phone | string | NumÃ©ro de tÃ©lÃ©phone |
| email | string | Email |
| user | relation | Utilisateur liÃ© (login client) |

---

### ğŸ“† `Rental`
ReprÃ©sente une rÃ©servation de vÃ©hicule.

| Champ | Type | Description |
|-------|------|-------------|
| id | UUID | Identifiant |
| car | relation | VÃ©hicule rÃ©servÃ© |
| customer | relation | Client |
| startDate | datetime | Date de dÃ©but |
| endDate | datetime | Date de fin |
| totalAmount | float | Montant total (en Ar) |
| status | string | pending / confirmed / cancelled / completed |

---

### ğŸ’³ `Payment`
ReprÃ©sente un paiement liÃ© Ã  une rÃ©servation.

| Champ | Type | Description |
|-------|------|-------------|
| id | UUID | Identifiant |
| rental | relation | RÃ©servation liÃ©e |
| amount | float | Montant payÃ© |
| method | string | Mobile Money / EspÃ¨ces / Virement |
| status | string | pending / paid / failed |
| paidAt | datetime | Date du paiement |

---

### ğŸ‘¥ `User`
Authentification des utilisateurs avec rÃ´les.

| Champ | Type | Description |
|-------|------|-------------|
| id | UUID | Identifiant |
| email | string | Email (unique) |
| password | hashed | Mot de passe |
| roles | array | ROLE_CUSTOMER, ROLE_AGENCY, ROLE_ADMIN |

---

## ğŸ” Authentification JWT

- Enregistrement/login via `/api/register` et `/api/login`
- Utilisation de `LexikJWTAuthenticationBundle`
- AccÃ¨s sÃ©curisÃ© pour les agences et les admins via rÃ´les

---

## ğŸ” Actions disponibles (routes API Platform)

### Public
- `GET /cars` â€“ Liste des voitures disponibles
- `GET /cars/{id}` â€“ DÃ©tails dâ€™une voiture
- `POST /register` â€“ CrÃ©er un compte client
- `POST /login` â€“ Authentification

### Client (`ROLE_CUSTOMER`)
- `GET /rentals` â€“ Liste de mes rÃ©servations
- `POST /rentals` â€“ CrÃ©er une rÃ©servation
- `POST /payments` â€“ Paiement dâ€™une rÃ©servation

### Agence (`ROLE_AGENCY`)
- `GET /agency/cars` â€“ Liste de mes voitures
- `POST /agency/cars` â€“ Ajouter une voiture
- `PATCH /agency/cars/{id}` â€“ Modifier une voiture
- `GET /agency/rentals` â€“ RÃ©servations des clients

### Admin (`ROLE_ADMIN`)
- GÃ©rer toutes les entitÃ©s (utilisateurs, agences, voitures, paiements)
- Statistiques mensuelles (locations, revenus, etc.)

---

## ğŸ“Š Exemples de logique mÃ©tier

- VÃ©rifier la **disponibilitÃ© dâ€™un vÃ©hicule** entre deux dates avant validation dâ€™une rÃ©servation.
- Calculer automatiquement le **montant total** :  
  `totalAmount = dailyRate Ã— nbJours`
- Annulation possible **24h avant le dÃ©but**.
- GÃ©nÃ©ration de facture PDF Ã  chaque rÃ©servation (si besoin).
- Authentification nÃ©cessaire pour effectuer une rÃ©servation.

---

## ğŸ“ ParticularitÃ©s Madagascar

- Monnaie en **Ariary (Ar)**
- IntÃ©gration possible de **paiement mobile** : Orange Money, Mvola, Airtel Money
- GÃ©olocalisation simplifiÃ©e : villes, quartiers
- Langues supportÃ©es : **FranÃ§ais**, **Malgache** (future extension)

---

## ğŸ§ª Tests

```bash
php bin/phpunit
```

Tests unitaires pour :
- DisponibilitÃ© de voiture
- Authentification
- Paiement
- Calcul du montant

---

## â–¶ï¸ Lancement du serveur

```bash
symfony serve
```

AccÃ¨s Ã  la documentation interactive :  
`http://localhost:8000/api`

---

## ğŸ“¦ DÃ©ploiement

- `.env.production` Ã  configurer
- Utilisation de Docker ou serveur LAMP/LEMP
- Base de donnÃ©es Ã  distance ou Dockerized

---

## âœ¨ Ã€ venir

- IntÃ©gration des paiements rÃ©els (via APIs mobile money)
- SystÃ¨me de notation des agences
- Notifications email/SMS
- Gestion des contrats numÃ©riques PDF

---

## ğŸ‘¨â€ğŸ’» Auteur

DÃ©veloppÃ© par un ingÃ©nieur logiciel malgache passionnÃ© ğŸ‘¨â€ğŸ’»  
Contact : `votre.email@example.com`

---

## ğŸ“„ Licence

MIT â€“ Open source & contributif. Nâ€™hÃ©sitez pas Ã  fork ğŸ”
